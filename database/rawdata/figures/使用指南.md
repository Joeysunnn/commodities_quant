# Metal Market Analytics Dashboard - 使用指南

## 🚀 快速启动

现在有多种方式启动仪表盘，无需在命令行输入命令：

### 方式 1：一键启动（最简单）⭐ 
1. 找到文件：`一键启动.bat`
2. 双击运行
3. 等待5-10秒，浏览器会自动打开 http://localhost:8501
4. 如需停止，关闭命令行窗口或按 Ctrl+C

### 方式 2：双击批处理文件
1. 找到文件：`启动仪表盘.bat`
2. 双击运行
3. 浏览器会自动打开 http://localhost:8501
4. 如需停止，按 Ctrl+C

### 方式 3：PowerShell 脚本
1. 右键点击 `启动仪表盘.ps1` 或 `一键启动.ps1`
2. 选择"使用 PowerShell 运行"
3. 浏览器会自动打开仪表盘

### 方式 4：HTML 启动页面（需要手动操作）
1. 双击 `启动页面.html`
2. 在浏览器中打开
3. **重要**：在文件夹中找到并双击运行 `一键启动.bat`
4. 等待服务器启动（约5-10秒）
5. 返回浏览器，点击 "打开仪表盘" 按钮

### 方式 5：直接访问（需先启动服务器）
1. 先用上述任一方式启动服务器
2. 在任何浏览器中访问：http://localhost:8501
3. 可以收藏该网址以便后续快速访问

## 📊 仪表盘功能

### GOLD（黄金）
- G1: 金价走势
- G2: 三地库存（LBMA, COMEX, GLD）
- G3: COMEX 结构紧缺度
- G4: 地理再分配（COMEX/LBMA）
- G5: 库存流量/拐点

### SILVER（白银）
- S1: 银价走势
- S2: 三地库存（LBMA, COMEX, SLV）
- S3: COMEX 结构紧缺度
- S4: 地理再分配
- S5: 资金流动量

### COPPER（铜）
- C1: 铜价走势
- C2: 三交易所库存（LME, SHFE, COMEX）
- C3: 全球可视库存（GVI）
- C4: LME 紧缺度
- C5: SHFE 交割化结构
- C6: 库存动量

## 🔧 技术说明

**服务器地址：** http://localhost:8501  
**Python 环境：** D:\anaconda3\envs\stat3612  
**数据库：** PostgreSQL (localhost:5432/commodities_db)  
**框架：** Streamlit + Plotly

## ⚠️ 注意事项

1. 首次使用必须先启动服务器（运行 .bat 或 .ps1 文件）
2. 服务器启动大约需要 3-5 秒
3. 关闭命令行窗口会停止服务器
4. 可以在多个浏览器标签页同时打开仪表盘
5. 建议使用 Chrome 或 Edge 浏览器以获得最佳体验

## 🎯 快捷方式创建

### 桌面快捷方式
1. 右键点击 `启动仪表盘.bat`
2. 选择"发送到" → "桌面快捷方式"
3. 以后双击桌面图标即可启动

### 固定到任务栏
1. 创建桌面快捷方式
2. 右键点击快捷方式
3. 选择"固定到任务栏"

## 📝 常见问题

**Q: 点击启动页面的"启动服务器"按钮后，仍然无法打开仪表盘？**  
A: 启动页面中的"启动服务器"按钮只是提示信息，不能直接启动服务器。请在文件夹中找到并双击运行 `一键启动.bat` 文件，等待5-10秒后，再点击"打开仪表盘"按钮。

**Q: 浏览器显示"无法访问此网站"或"ERR_CONNECTION_REFUSED"？**  
A: 这表示服务器未启动。请确保：
   1. 已经双击运行了 `一键启动.bat` 或 `启动仪表盘.bat`
   2. 命令行窗口显示 "You can now view your Streamlit app"
   3. 等待至少5-10秒让服务器完全启动

**Q: 浏览器无法打开？**  
A: 确保服务器已启动（命令行窗口显示 "You can now view your Streamlit app in your browser"）

**Q: 端口 8501 已被占用？**  
A: 关闭其他使用该端口的程序，或在PowerShell中运行：
```powershell
Get-NetTCPConnection -LocalPort 8501 | ForEach-Object { Stop-Process -Id $_.OwningProcess -Force }
```

**Q: 数据无法加载？**  
A: 检查 PostgreSQL 数据库是否正在运行

**Q: 如何后台运行？**  
A: 最小化命令行窗口，不要关闭

## 📞 支持

如遇问题，请检查：
1. Python 环境是否正确
2. 数据库连接是否正常
3. 端口 8501 是否被占用
4. 防火墙是否阻止访问
